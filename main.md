---
title : f#
---

### Основы F# /1
F# создан Microsoft
- Functional first programming
- Взаимодействие с .NET (C#)
- Разрабатывать можно практически всё


Простые примеры:

Умножение на 2
```fsharp
let twice x = x * 2
twice 3
```

Второй вариант того же самого
```fsharp
(fun x -> x * 2) 3
```

Данные варианты эквиваленты:
```fsharp
let f x = x * 2
let f = (fun x -> x * 2)
```

Решение квадратных уравнений
```fsharp
let solve (a, b, c) =
    let d = b * b - 4. * a * c
    let x1 = (-b - sqrt (d)) / (2. * a)
    let x2 = (-b + sqrt (d)) / (2. * a)
    (x1, x2)

solve <| (1., 2., 1.)
solve <| (1., 2., -3.)
```

Как работает несколько аргументов (Карирование):

```fsharp
let plus x y = x + y;
let pre = (plus 1)
pre 2
```
Тут наглядно видно что технически мы не применяем аргументы, а сначала создаём функцию которая подставляет на место первого 1, а затем можно подставить другое число. Те можно понять как частичное выполнение функций, или подстановку в макрос. Также можно представить exel таблицу, где формулы к ячейкам применяются аналогично.

```fsharp
// если представить как лямбда выраждение становится очевидным как работает
let plus = fun x -> (fun y -> x + y)
```
Итого:
- В функциональном программировании функции нескольких аргументов сводятся к функции одного аргумента
- Каррированая форма позволяет частичное применение функции

Условный оператор:

```fsharp
let max x y = if x > y then x else y

// если значение не возвращается (unit), то можно опустить else
let greater x y = if x > y then printfn "Truth"
```

Передача функции в качестве параметра
```fsharp
let table f =
    printfn " X     f(X)"
    for i = 0 to 10 do
        let x = 1./float(i)
        printfn "%7.4f    %7.4f" x(f, x)
```

Ещё интересные пример:

```fsharp
let min a b = if a > b then b else a
let max a b = if a > b then a else b

let triple f a b c = f (f a b) c
triple (+) 1 2 3 // 6
triple min 8 9 3 // 3
```
Выводы:
- Функциональные программы очень лаконичны. В том числе из-за вывода типов.
- Все переменные - неизменяемые.
- Есть две базовые операции - определение функции и её применение. На их основе всё построено.
- Функции можно легко передавать в качестве аргументов в другие функции (функции высших порядков).
- Функции нескольких аргументов сводятся к функциям одного аргумента с помощью каррирования.
- Функциональное программирование
концентрируется на обработке данных
- В нем нет изменяемых переменных, поэтому нет побочных эффектов проще распараллеливать код
- Основная мощь - возможность композиции функций, работа с функциями как с данными
- Краткая запись (вывод типов)

### Функции и списки /2

Редукция — упрощение выражений в ходе вычислений (подстановка)
В F# энергичный (аппликативный порядок редукции) (идёт упрощение с конца (сначала аргумент, потом передаётся в функцию))

Композиция:

```fsharp
// как они внутри
let (>>) f g = fun x -> g(f x)
let (<<) f g = fun x -> f(g x)

let (|>) x f = f x
let (>|) f x = f x
```

Пример

```fsharp
// все эквивалентны 
let f x = 2 * x + 1
let f = fun x -> 2 * x + 1

let f = fun x -> x |> (*) 2 |> (+) 1
let f = (*) 2 >> (+) 1
```







```
Template:
```fsharp
// 

```
```